<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Android APK Hub - Discover Free Apps</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-content">
      <a href="index.html" class="navbar-brand">
        <img src="https://raw.githubusercontent.com/sorofa65/PicAPK/c9608355d640327a7cd07ff542dbcef613580c8c/images/Logo.jpg" 
             alt="APK Hub Logo">
        <span class="logo-text">APK Hub</span>
      </a>
      <div class="nav-links">
        <a href="index.html" class="nav-link active">Home</a>
        <a href="#" class="nav-link">About</a>
        <a href="#" class="nav-link">Contact</a>
      </div>
      <form class="search-form" id="searchForm">
        <input class="form-control me-2" type="search" id="searchInput" placeholder="Search apps..." aria-label="Search">
        <button class="btn btn-success" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <!-- Home Page Content -->
  <div class="container">
    <header class="home-header">
      <h1>Android APK Hub</h1>
      <p class="subtitle">Discover thousands of free, safe Android APKs across various categories. Find your next favorite app today!</p>
      
      <div class="stats">
        <div class="stat-item">
          <div class="stat-value">1.5M+</div>
          <div class="stat-label">Total Apps</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">250+</div>
          <div class="stat-label">Categories</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">98%</div>
          <div class="stat-label">User Satisfaction</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">4.7â˜…</div>
          <div class="stat-label">Average Rating</div>
        </div>
      </div>
      
      <div class="category-nav" id="categoryNav">
        <button class="category-btn active" data-category="all">
          <i class="fas fa-layer-group"></i> All Apps
        </button>
        <button class="category-btn" data-category="games">
          <i class="fas fa-gamepad"></i> Games
        </button>
        <button class="category-btn" data-category="photography">
          <i class="fas fa-camera"></i> Photography
        </button>
        <button class="category-btn" data-category="social">
          <i class="fas fa-share-alt"></i> Social
        </button>
        <button class="category-btn" data-category="tools">
          <i class="fas fa-tools"></i> Tools
        </button>
      </div>
    </header>
    
    <div class="carousel-container">
      <div class="carousel-header">
        <h2 class="carousel-title">
          <i class="fas fa-star"></i> Popular Apps
        </h2>
      </div>
      
      <div class="apps-grid" id="appsGrid">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading apps...</div>
      </div>
    </div>
    
    <div class="carousel-container">
      <div class="carousel-header">
        <h2 class="carousel-title">
          <i class="fas fa-gamepad"></i> Top Games
        </h2>
      </div>
      
      <div class="apps-grid" id="gamesGrid">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading games...</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-links">
        <a href="#">About Us</a>
        <a href="#">Contact Us</a>
        <a href="#">Terms & Conditions</a>
        <a href="#">Privacy Policy</a>
      </div>
      <div class="copyright">
        &copy; 2025 Android APK Hub. All rights reserved.
      </div>
    </div>
  </footer>

  <script>
    // DOM Elements
    const appsGrid = document.getElementById('appsGrid');
    const gamesGrid = document.getElementById('gamesGrid');
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');
    const categoryButtons = document.querySelectorAll('.category-btn');
    let appData = [];

    // Fetch app data from JSON file
    async function fetchAppData() {
      try {
        const response = await fetch('apks.json');
        if (!response.ok) {
          throw new Error('Failed to load app data');
        }
        const data = await response.json();
        appData = data.apps || [];
        
        // Initialize the app
        initApp();
      } catch (error) {
        console.error('Error loading app data:', error);
        showError();
      }
    }

    // Initialize the app
    function initApp() {
      // Render all apps
      renderApps(appData);
      
      // Render top games
      const games = appData.filter(app => app.category && app.category.toLowerCase() === "games");
      renderGames(games);
      
      // Set up event listeners
      setupEventListeners();
    }

    // Set up event listeners
    function setupEventListeners() {
      // Category filter buttons
      categoryButtons.forEach(button => {
        button.addEventListener('click', () => {
          const category = button.dataset.category;
          
          // Update active button
          categoryButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          
          // Filter apps
          if (category === 'all') {
            renderApps(appData);
          } else {
            const filteredApps = appData.filter(app => 
              app.category && app.category.toLowerCase() === category
            );
            renderApps(filteredApps);
          }
        });
      });
      
      // Search form
      searchForm.addEventListener('submit', (e) => {
        e.preventDefault();
        searchApps();
      });
    }

    // Render apps
    function renderApps(apps) {
      if (!apps || apps.length === 0) {
        appsGrid.innerHTML = '<div class="error-message">No apps found. Try another search or category.</div>';
        return;
      }
      
      appsGrid.innerHTML = '';
      
      apps.forEach(app => {
        const appCard = document.createElement('div');
        appCard.className = 'app-card';
        appCard.dataset.slug = app.slug;
        
        appCard.innerHTML = `
          <div class="app-icon">
            <img src="${app.icon}" alt="${app.name}">
          </div>
          <h3 class="app-name">${app.name}</h3>
          <p class="app-description">${app.description}</p>
          <div class="app-meta">
            <span>${app.version}</span>
            <span>${app.size}</span>
          </div>
          <div class="app-downloads">Downloads: ${app.downloads.toLocaleString()}</div>
        `;
        
        appCard.addEventListener('click', () => {
          window.location.href = `details.html?slug=${app.slug}`;
        });
        
        appsGrid.appendChild(appCard);
      });
    }

    // Render games
    function renderGames(games) {
      if (!games || games.length === 0) {
        gamesGrid.innerHTML = '<div class="error-message">No games found at the moment.</div>';
        return;
      }
      
      gamesGrid.innerHTML = '';
      
      games.forEach(game => {
        const gameCard = document.createElement('div');
        gameCard.className = 'app-card';
        gameCard.dataset.slug = game.slug;
        
        gameCard.innerHTML = `
          <div class="app-icon">
            <img src="${game.icon}" alt="${game.name}">
          </div>
          <h3 class="app-name">${game.name}</h3>
          <p class="app-description">${game.description}</p>
          <div class="app-meta">
            <span>${game.version}</span>
            <span>${game.size}</span>
          </div>
          <div class="app-downloads">Downloads: ${game.downloads.toLocaleString()}</div>
        `;
        
        gameCard.addEventListener('click', () => {
          window.location.href = `details.html?slug=${game.slug}`;
        });
        
        gamesGrid.appendChild(gameCard);
      });
    }

    // Search apps
    function searchApps() {
      const query = searchInput.value.trim().toLowerCase();
      if (!query) {
        renderApps(appData);
        return;
      }
      
      const filteredApps = appData.filter(app => 
        (app.name && app.name.toLowerCase().includes(query)) || 
        (app.description && app.description.toLowerCase().includes(query)) ||
        (app.category && app.category.toLowerCase().includes(query))
      );
      
      renderApps(filteredApps);
      
      // Reset category buttons
      categoryButtons.forEach(btn => btn.classList.remove('active'));
      document.querySelector('[data-category="all"]').classList.add('active');
    }

    // Show error message
    function showError() {
      appsGrid.innerHTML = `
        <div class="error-message">
          <h3><i class="fas fa-exclamation-triangle"></i> Error Loading Apps</h3>
          <p>Failed to load app data. Please try again later.</p>
          <button class="btn btn-primary" onclick="location.reload()">
            <i class="fas fa-redo"></i> Reload Page
          </button>
        </div>
      `;
      
      gamesGrid.innerHTML = '';
    }

    // Initialize the app by fetching data
    document.addEventListener('DOMContentLoaded', fetchAppData);
  </script>
</body>
</html>
